guard :concat, :type => "css", :files => %w[loading-bar ngProgress style], :input_dir => "public/css", :output => "public/css/styles.min"

guard :concat, :type => "js", :files => %w[angular\config angular\controllers angular\directives angular\services vendor\angular\angular-csp vendor\angular\angular vendor\angular\angular.min.js.gzip vendor\angular\angular.min.js.map vendor\angular\bower.json vendor\angular\README.md vendor\angular-animate\angular-animate vendor\angular-animate\angular-animate.min.js.map vendor\angular-animate\bower.json vendor\angular-animate\README.md vendor\angular-sanitize\angular-sanitize vendor\angular-sanitize\angular-sanitize.min.js.map vendor\angular-sanitize\bower.json vendor\angular-sanitize\README.md vendor\angular-ui-router\bower.json vendor\angular-ui-router\CHANGELOG.md C:\wamp\www\guides/public/js\vendor\angular-ui-router\LICENSE vendor\angular-ui-router\README.md vendor\angular-ui-router\release\angular-ui-router vendor\angular-ui-router\src\common vendor\angular-ui-router\src\compat vendor\angular-ui-router\src\resolve vendor\angular-ui-router\src\state vendor\angular-ui-router\src\stateDirectives vendor\angular-ui-router\src\stateFilters vendor\angular-ui-router\src\templateFactory vendor\angular-ui-router\src\urlMatcherFactory vendor\angular-ui-router\src\urlRouter vendor\angular-ui-router\src\view vendor\angular-ui-router\src\viewDirective vendor\angular-ui-router\src\viewScroll vendor\fastclick\bower.json vendor\fastclick\lib\fastclick C:\wamp\www\guides/public/js\vendor\fastclick\LICENSE vendor\fastclick\README.md vendor\foundation\bower.json vendor\foundation\css\foundation vendor\foundation\css\normalize vendor\foundation\js\foundation\foundation.abide vendor\foundation\js\foundation\foundation.accordion vendor\foundation\js\foundation\foundation.alert vendor\foundation\js\foundation\foundation.clearing vendor\foundation\js\foundation\foundation.dropdown vendor\foundation\js\foundation\foundation.equalizer vendor\foundation\js\foundation\foundation.interchange vendor\foundation\js\foundation\foundation.joyride vendor\foundation\js\foundation\foundation vendor\foundation\js\foundation\foundation.magellan vendor\foundation\js\foundation\foundation.offcanvas vendor\foundation\js\foundation\foundation.orbit vendor\foundation\js\foundation\foundation.reveal vendor\foundation\js\foundation\foundation.slider vendor\foundation\js\foundation\foundation.tab vendor\foundation\js\foundation\foundation.tooltip vendor\foundation\js\foundation\foundation.topbar vendor\foundation\js\foundation vendor\foundation\scss\foundation\components\_accordion.scss vendor\foundation\scss\foundation\components\_alert-boxes.scss vendor\foundation\scss\foundation\components\_block-grid.scss vendor\foundation\scss\foundation\components\_breadcrumbs.scss vendor\foundation\scss\foundation\components\_button-groups.scss vendor\foundation\scss\foundation\components\_buttons.scss vendor\foundation\scss\foundation\components\_clearing.scss vendor\foundation\scss\foundation\components\_dropdown-buttons.scss vendor\foundation\scss\foundation\components\_dropdown.scss vendor\foundation\scss\foundation\components\_flex-video.scss vendor\foundation\scss\foundation\components\_forms.scss vendor\foundation\scss\foundation\components\_global.scss vendor\foundation\scss\foundation\components\_grid.scss vendor\foundation\scss\foundation\components\_inline-lists.scss vendor\foundation\scss\foundation\components\_joyride.scss vendor\foundation\scss\foundation\components\_keystrokes.scss vendor\foundation\scss\foundation\components\_labels.scss vendor\foundation\scss\foundation\components\_magellan.scss vendor\foundation\scss\foundation\components\_offcanvas.scss vendor\foundation\scss\foundation\components\_orbit.scss vendor\foundation\scss\foundation\components\_pagination.scss vendor\foundation\scss\foundation\components\_panels.scss vendor\foundation\scss\foundation\components\_pricing-tables.scss vendor\foundation\scss\foundation\components\_progress-bars.scss vendor\foundation\scss\foundation\components\_range-slider.scss vendor\foundation\scss\foundation\components\_reveal-new.scss vendor\foundation\scss\foundation\components\_reveal.scss vendor\foundation\scss\foundation\components\_side-nav.scss vendor\foundation\scss\foundation\components\_split-buttons.scss vendor\foundation\scss\foundation\components\_sub-nav.scss vendor\foundation\scss\foundation\components\_switch.scss vendor\foundation\scss\foundation\components\_tables.scss vendor\foundation\scss\foundation\components\_tabs.scss vendor\foundation\scss\foundation\components\_thumbs.scss vendor\foundation\scss\foundation\components\_tooltips.scss vendor\foundation\scss\foundation\components\_top-bar.scss vendor\foundation\scss\foundation\components\_type.scss vendor\foundation\scss\foundation\components\_visibility.scss vendor\foundation\scss\foundation\_functions.scss vendor\foundation\scss\foundation\_settings.scss vendor\foundation\scss\foundation.scss vendor\foundation\scss\normalize.scss vendor\jquery\bower.json vendor\jquery\dist\jquery vendor\jquery\dist\jquery.min.map vendor\jquery\MIT-LICENSE.txt vendor\jquery\src\ajax\jsonp vendor\jquery\src\ajax\load vendor\jquery\src\ajax\parseJSON vendor\jquery\src\ajax\parseXML vendor\jquery\src\ajax\script vendor\jquery\src\ajax\var\nonce vendor\jquery\src\ajax\var\rquery vendor\jquery\src\ajax\xhr vendor\jquery\src\ajax vendor\jquery\src\attributes\attr vendor\jquery\src\attributes\classes vendor\jquery\src\attributes\prop vendor\jquery\src\attributes\support vendor\jquery\src\attributes\val vendor\jquery\src\attributes vendor\jquery\src\callbacks vendor\jquery\src\core\access vendor\jquery\src\core\init vendor\jquery\src\core\parseHTML vendor\jquery\src\core\ready vendor\jquery\src\core\var\rsingleTag vendor\jquery\src\core vendor\jquery\src\css\addGetHookIf vendor\jquery\src\css\curCSS vendor\jquery\src\css\defaultDisplay vendor\jquery\src\css\hiddenVisibleSelectors vendor\jquery\src\css\support vendor\jquery\src\css\swap vendor\jquery\src\css\var\cssExpand vendor\jquery\src\css\var\getStyles vendor\jquery\src\css\var\isHidden vendor\jquery\src\css\var\rmargin vendor\jquery\src\css\var\rnumnonpx vendor\jquery\src\css vendor\jquery\src\data\accepts vendor\jquery\src\data\Data vendor\jquery\src\data\var\data_priv vendor\jquery\src\data\var\data_user vendor\jquery\src\data vendor\jquery\src\deferred vendor\jquery\src\deprecated vendor\jquery\src\dimensions vendor\jquery\src\effects\animatedSelector vendor\jquery\src\effects\Tween vendor\jquery\src\effects vendor\jquery\src\event\alias vendor\jquery\src\event\support vendor\jquery\src\event vendor\jquery\src\exports\amd vendor\jquery\src\exports\global vendor\jquery\src\intro vendor\jquery\src\jquery vendor\jquery\src\manipulation\support vendor\jquery\src\manipulation\var\rcheckableType vendor\jquery\src\manipulation\_evalUrl vendor\jquery\src\manipulation vendor\jquery\src\offset vendor\jquery\src\outro vendor\jquery\src\queue\delay vendor\jquery\src\queue vendor\jquery\src\selector-native vendor\jquery\src\selector-sizzle vendor\jquery\src\selector vendor\jquery\src\serialize vendor\jquery\src\sizzle\dist\sizzle vendor\jquery\src\sizzle\dist\sizzle.min.map vendor\jquery\src\traversing\findFilter vendor\jquery\src\traversing\var\rneedsContext vendor\jquery\src\traversing vendor\jquery\src\var\arr vendor\jquery\src\var\class2type vendor\jquery\src\var\concat vendor\jquery\src\var\hasOwn vendor\jquery\src\var\indexOf vendor\jquery\src\var\pnum vendor\jquery\src\var\push vendor\jquery\src\var\rnotwhite vendor\jquery\src\var\slice vendor\jquery\src\var\strundefined vendor\jquery\src\var\support vendor\jquery\src\var\toString vendor\jquery\src\var\trim vendor\jquery\src\wrap vendor\jquery-placeholder\bower.json vendor\jquery-placeholder\demo.html vendor\jquery-placeholder\jquery.placeholder vendor\jquery-placeholder\LICENSE-MIT.txt vendor\jquery-placeholder\README.md vendor\jquery-placeholder\tests\index.html vendor\jquery-placeholder\tests\tests vendor\jquery.cookie\jquery.cookie vendor\lodash\bower.json vendor\lodash\dist\lodash.compat vendor\lodash\dist\lodash vendor\lodash\dist\lodash.underscore vendor\lodash\LICENSE.txt vendor\modernizr\feature-detects\a-download vendor\modernizr\feature-detects\audio-audiodata-api vendor\modernizr\feature-detects\audio-webaudio-api vendor\modernizr\feature-detects\battery-api vendor\modernizr\feature-detects\battery-level vendor\modernizr\feature-detects\blob-constructor vendor\modernizr\feature-detects\canvas-todataurl-type vendor\modernizr\feature-detects\contenteditable vendor\modernizr\feature-detects\contentsecuritypolicy vendor\modernizr\feature-detects\contextmenu vendor\modernizr\feature-detects\cookies vendor\modernizr\feature-detects\cors vendor\modernizr\feature-detects\css-backgroundposition-shorthand vendor\modernizr\feature-detects\css-backgroundposition-xy vendor\modernizr\feature-detects\css-backgroundrepeat vendor\modernizr\feature-detects\css-backgroundsizecover vendor\modernizr\feature-detects\css-boxsizing vendor\modernizr\feature-detects\css-calc vendor\modernizr\feature-detects\css-cubicbezierrange vendor\modernizr\feature-detects\css-displayrunin vendor\modernizr\feature-detects\css-displaytable vendor\modernizr\feature-detects\css-filters vendor\modernizr\feature-detects\css-hyphens vendor\modernizr\feature-detects\css-lastchild vendor\modernizr\feature-detects\css-mask vendor\modernizr\feature-detects\css-mediaqueries vendor\modernizr\feature-detects\css-objectfit vendor\modernizr\feature-detects\css-overflow-scrolling vendor\modernizr\feature-detects\css-pointerevents vendor\modernizr\feature-detects\css-positionsticky vendor\modernizr\feature-detects\css-regions vendor\modernizr\feature-detects\css-remunit vendor\modernizr\feature-detects\css-resize vendor\modernizr\feature-detects\css-scrollbars vendor\modernizr\feature-detects\css-subpixelfont vendor\modernizr\feature-detects\css-supports vendor\modernizr\feature-detects\css-userselect vendor\modernizr\feature-detects\css-vhunit vendor\modernizr\feature-detects\css-vmaxunit vendor\modernizr\feature-detects\css-vminunit vendor\modernizr\feature-detects\css-vwunit vendor\modernizr\feature-detects\custom-protocol-handler vendor\modernizr\feature-detects\dart vendor\modernizr\feature-detects\dataview-api vendor\modernizr\feature-detects\dom-classlist vendor\modernizr\feature-detects\dom-createElement-attrs vendor\modernizr\feature-detects\dom-dataset vendor\modernizr\feature-detects\dom-microdata vendor\modernizr\feature-detects\elem-datalist vendor\modernizr\feature-detects\elem-details vendor\modernizr\feature-detects\elem-output vendor\modernizr\feature-detects\elem-progress-meter vendor\modernizr\feature-detects\elem-ruby vendor\modernizr\feature-detects\elem-time vendor\modernizr\feature-detects\elem-track vendor\modernizr\feature-detects\emoji vendor\modernizr\feature-detects\es5-strictmode vendor\modernizr\feature-detects\event-deviceorientation-motion vendor\modernizr\feature-detects\exif-orientation vendor\modernizr\feature-detects\file-api vendor\modernizr\feature-detects\file-filesystem vendor\modernizr\feature-detects\forms-fileinput vendor\modernizr\feature-detects\forms-formattribute vendor\modernizr\feature-detects\forms-inputnumber-l10n vendor\modernizr\feature-detects\forms-placeholder vendor\modernizr\feature-detects\forms-speechinput vendor\modernizr\feature-detects\forms-validation vendor\modernizr\feature-detects\fullscreen-api vendor\modernizr\feature-detects\gamepad vendor\modernizr\feature-detects\getusermedia vendor\modernizr\feature-detects\ie8compat vendor\modernizr\feature-detects\iframe-sandbox vendor\modernizr\feature-detects\iframe-seamless vendor\modernizr\feature-detects\iframe-srcdoc vendor\modernizr\feature-detects\img-apng vendor\modernizr\feature-detects\img-webp vendor\modernizr\feature-detects\json vendor\modernizr\feature-detects\lists-reversed vendor\modernizr\feature-detects\mathml vendor\modernizr\feature-detects\network-connection vendor\modernizr\feature-detects\network-eventsource vendor\modernizr\feature-detects\network-xhr2 vendor\modernizr\feature-detects\notification vendor\modernizr\feature-detects\performance vendor\modernizr\feature-detects\pointerlock-api vendor\modernizr\feature-detects\quota-management-api vendor\modernizr\feature-detects\requestanimationframe vendor\modernizr\feature-detects\script-async vendor\modernizr\feature-detects\script-defer vendor\modernizr\feature-detects\style-scoped vendor\modernizr\feature-detects\svg-filters vendor\modernizr\feature-detects\unicode vendor\modernizr\feature-detects\url-data-uri vendor\modernizr\feature-detects\userdata vendor\modernizr\feature-detects\vibration vendor\modernizr\feature-detects\web-intents vendor\modernizr\feature-detects\webgl-extensions vendor\modernizr\feature-detects\websockets-binary vendor\modernizr\feature-detects\window-framed vendor\modernizr\feature-detects\workers-blobworkers vendor\modernizr\feature-detects\workers-dataworkers vendor\modernizr\feature-detects\workers-sharedworkers vendor\modernizr\grunt vendor\modernizr\media\Modernizr 2 Logo.ai vendor\modernizr\media\Modernizr 2 Logo.eps vendor\modernizr\media\Modernizr 2 Logo.pdf vendor\modernizr\media\Modernizr 2 Logo.png vendor\modernizr\media\Modernizr 2 Logo.svg vendor\modernizr\modernizr vendor\modernizr\readme.md vendor\modernizr\test\basic.html vendor\modernizr\test\caniuse.html vendor\modernizr\test\caniuse_files\alpha.png vendor\modernizr\test\caniuse_files\apng_test.png vendor\modernizr\test\caniuse_files\before-after.png vendor\modernizr\test\caniuse_files\form_validation.html vendor\modernizr\test\caniuse_files\ga vendor\modernizr\test\caniuse_files\green5x5.png vendor\modernizr\test\caniuse_files\hashchange.html vendor\modernizr\test\caniuse_files\mathml.html vendor\modernizr\test\caniuse_files\mathml_ref.png vendor\modernizr\test\caniuse_files\png_alpha_result.png vendor\modernizr\test\caniuse_files\pushstate.html vendor\modernizr\test\caniuse_files\red30x30.png vendor\modernizr\test\caniuse_files\ruby.png vendor\modernizr\test\caniuse_files\stroked-text.png vendor\modernizr\test\caniuse_files\style vendor\modernizr\test\caniuse_files\svg-html-blur.png vendor\modernizr\test\caniuse_files\svg-img.svg vendor\modernizr\test\caniuse_files\svg-img.svg.1 vendor\modernizr\test\caniuse_files\svg_blur.png vendor\modernizr\test\caniuse_files\table.png vendor\modernizr\test\caniuse_files\text-shadow1.png vendor\modernizr\test\caniuse_files\text-shadow2.png vendor\modernizr\test\caniuse_files\Windsong-webfont.eot vendor\modernizr\test\caniuse_files\Windsong-webfont.otf vendor\modernizr\test\caniuse_files\Windsong-webfont.svg vendor\modernizr\test\caniuse_files\Windsong-webfont.ttf vendor\modernizr\test\caniuse_files\Windsong-webfont.woff vendor\modernizr\test\caniuse_files\windsong_font.png vendor\modernizr\test\caniuse_files\xhtml.html vendor\modernizr\test\index.html vendor\modernizr\test\js\basic.html vendor\modernizr\test\js\dumpdata vendor\modernizr\test\js\lib\detect-global vendor\modernizr\test\js\lib\jquery-1.7b2 vendor\modernizr\test\js\lib\jsonselect vendor\modernizr\test\js\lib\polyfills vendor\modernizr\test\js\lib\uaparser vendor\modernizr\test\js\setup vendor\modernizr\test\js\unit-caniuse vendor\modernizr\test\js\unit vendor\modernizr\test\qunit\qunit vendor\modernizr\test\qunit\qunit vendor\modernizr\test\qunit\run-qunit vendor\ngProgress vendor\restangular\bower.json vendor\restangular\CHANGELOG.md vendor\restangular\CONTRIBUTE.md vendor\restangular\dist\restangular vendor\restangular\dist\restangular.zip vendor\restangular\Gruntfile vendor\restangular\karma.conf vendor\restangular\karma.underscore.conf vendor\restangular\license.md vendor\restangular\package.json vendor\restangular\README.md vendor\restangular\src\restangular vendor\restangular\test\restangularSpec], :input_dir => "public/js", :output => "public/js/scripts.min"

# Refresh the browser on save
guard 'livereload' do
  watch(%r{.+(?<!\.min)\.(css|html|js|blade\.php)$})
end

#guard :phpunit, :all_on_start => false, :tests_path => 'app/tests/', :cli => '--colors -c phpunit.xml' do
  # Run any test in app/tests upon save.
 # watch(%r{^.+Test\.php$})

  # When a view file is updated, run tests.
  # Tip: you probably only want to run your integration tests.
  #watch(%r{app/views/.+\.php}) { Dir.glob('app/tests/**/*.php') }

  # When a file is edited, try to run its associated test.
  # Save app/models/User.php, and it will run app/tests/models/UserTest.php
  #watch(%r{^app/(.+)/(.+)\.php$}) { |m| "app/tests/#{m[1]}/#{m[2]}Test.php"}
#end

module ::Guard
  class Refresher < Guard
    def run_all
      # refresh
    end

    def run_on_additions(paths)
      refresh
    end

    def run_on_removals(paths)
      refresh
    end

    def refresh
      `php artisan guard:refresh`
    end
  end
end

require 'cssmin'
require 'jsmin'

guard :refresher do
  watch(%r[public/js/.+])
  watch(%r[public/css/.+])
  watch(%r{app/config/packages/way/guard-laravel/guard.php}) do |m|
    `php artisan guard:refresh`
  end
  watch('public/css/styles.min.css') do |m|
    css = File.read(m[0])
    File.open(m[0], 'w') { |file| file.write(CSSMin.minify(css)) }
  end
  watch('public/js/scripts.min.js') do |m|
    js = File.read(m[0])
    File.open(m[0], 'w') { |file| file.write(JSMin.minify(js)) }
  end
end